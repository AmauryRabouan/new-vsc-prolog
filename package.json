{
  "name": "vsc-prolog",
  "displayName": "vsc-prolog",
  "description": "Support for Prolog language",
  "version": "0.0.1",
  "publisher": "arthurwang",
  "engines": {
    "vscode": "^1.5.0"
  },
  "categories": ["Languages", "Formatters", "Snippets", "Linters", "Debuggers"],
  "keywords": ["prolog", "swi-prolog", "debug", "linter", "snippet", "format"],
  "author": {
    "name": "Arthur Wang",
    "email": "rthrwang@gmail.com"
  },
  "main": "./out/src/extension",
  "activationEvents": ["onLanguage:prolog"],
  "contributes": {
    "languages": [
      {
        "id": "prolog",
        "aliases": ["Prolog", "swipl"],
        "configuration": "./prolog.configuration.json",
        "extensions": [".pl", ".pro", ".prolog"]
      }
    ],
    "grammars": [
      {
        "language": "prolog",
        "scopeName": "source.prolog",
        "path": "./syntaxes/prolog.tmLanguage.json"
      }
    ],
    "snippets": [
      {
        "language": "prolog",
        "path": "./snippets/prolog.json"
      }
    ],
    "commands": [
      {
        "command": "prolog.linter.nextErrLine",
        "title": "Prolog: Goto next error line"
      },
      {
        "command": "prolog.linter.prevErrLine",
        "title": "Prolog: Goto previous error line"
      },
      {
        "command": "prolog.exportPredicate",
        "title": "Prolog: export predicate under cursor"
      },
      {
        "command": "prolog.load.document",
        "title": "Prolog: load document"
      },
      {
        "command": "prolog.query.goal",
        "title": "Prolog: query goal under cursor"
      }
    ],
    "keybindings": [
      {
        "command": "prolog.linter.nextErrLine",
        "key": "f8"
      },
      {
        "command": "prolog.linter.prevErrLine",
        "key": "shift+f8"
      },
      {
        "command": "prolog.exportPredicate",
        "key": "alt+x x"
      },
      {
        "command": "prolog.load.document",
        "key": "alt+x l"
      },
      {
        "command": "prolog.query.goal",
        "key": "alt+x q"
      }
    ],
    "menus": {
      "editor/context": [
        {
          "command": "prolog.exportPredicate",
          "when": "resourceLangId == prolog"
        }
      ]
    },
    "debuggers": [
      {
        "type": "prolog",
        "label": "Prolog",
        "enableBreakpointsFor": {
          "languageIds": ["prolog"]
        },
        "program": "./out/src/features/prologDebugSession.js",
        "runtime": "node",
        "configurationAttributes": {
          "launch": {
            "required": [
              "program",
              "startupQuery",
              "cwd",
              "runtimeExecutable",
              "runtimeArgs",
              "terminalDebuggerPort",
              "console"
            ],
            "properties": {
              "program": {
                "type": "string",
                "description": "Absolute path to the program."
              },
              "startupQuery": {
                "type": "string",
                "description": "The goal to query for starting debugging.",
                "default": "start"
              },
              "stopOnEntry": {
                "type": "boolean",
                "description": "Automatically stop program after launch.",
                "default": true
              },
              "args": {
                "type": "array",
                "description": "Command line arguments passed to the program.",
                "items": {
                  "type": "string"
                },
                "default": []
              },
              "cwd": {
                "type": "string",
                "description": "Absolute path to the working directory of the program being debugged.",
                "default": "${workspaceRoot}"
              },
              "env": {
                "type": "object",
                "additionalProperties": {
                  "type": "string"
                },
                "description": "Environment variable passed to the program.",
                "default": {}
              },
              "runtimeExecutable": {
                "type": "string",
                "description": "Debug process executable.",
                "default": "/opt/swipl/bin/swipl"
              },
              "runtimeArgs": {
                "type": "array",
                "description": "Command line arguments passed to the debug executable.",
                "items": {
                  "type": "string"
                },
                "default": []
              },
              "terminalDebuggerPort": {
                "type": "number",
                "description": "Port for tracing in internalTerminal or externalTerminal",
                "default": 5959
              },
              "console": {
                "type": "string",
                "enum": [
                  "internalConsole",
                  "integratedTerminal",
                  "externalTerminal"
                ],
                "default": "externalTerminal"
              }
            }
          }
        },
        "initialConfigurations": [
          {
            "name": "Debug Prolog Files",
            "type": "prolog",
            "request": "launch",
            "runtimeExecutable": "/opt/swipl/bin/swipl",
            "runtimeArgs": [],
            "env": {},
            "program": "${file}",
            "cwd": "${fileDirname}",
            "startupQuery": "start",
            "stopOnEntry": true,
            "terminalDebuggerPort": 5959,
            "console": "externalTerminal"
          }
        ]
      }
    ],
    "configuration": {
      "title": "",
      "properties": {
        "prolog.executablePath": {
          "type": "string",
          "default": "/opt/swipl/bin/swipl",
          "description": "Points to the Prolog executable."
        },
        "prolog.linter.run": {
          "type": "string",
          "enum": ["onSave", "onType"],
          "default": "onType",
          "description": "How to trigger the linter."
        },
        "prolog.linter.delay": {
          "type": "number",
          "default": 500,
          "description": "The milliseconds to delay when using onType trigger."
        },
        "prolog.terminal.runtimeArgs": {
          "type": "array",
          "description": "Arguments of Prolog executable run in terminal.",
          "default": []
        },
        "prolog.format.tabSize": {
          "type": "number",
          "default": 4,
          "description": "The size of a tab in spaces"
        },
        "prolog.format.insertSpaces": {
          "type": "boolean",
          "default": true,
          "description": "Prefer spaces over tabs"
        },
        "prolog.debug.runtimeArgs": {
          "type": "array",
          "description": "Arguments of Prolog executable run as debugger.",
          "default": ["-q"]
        }
      }
    }
  },
  "scripts": {
    "vscode:prepublish": "tsc -p ./",
    "compile": "tsc -watch -p ./",
    "postinstall": "node ./node_modules/vscode/bin/install",
    "test": "node ./node_modules/vscode/bin/test",
    "updateVSCProlog": "cross-var rsync -av --delete ../vsc-prolog $HOME/.vscode/extensions/",
    "syntax": "yaml2json --pretty --watch --save ./syntaxes/prolog.tmLanguage.yaml",
    "pkgvars": "node ./node_modules/vscode/bin/install"
  },
  "devDependencies": {
    "@types/bluebird": "^3.5.8",
    "@types/mocha": "^2.2.32",
    "@types/node": "^7.0.13",
    "@types/yamljs": "^0.2.30",
    "cross-var": "^1.0.3",
    "mocha": "^2.3.3",
    "typescript": "^2.0.3",
    "vscode": "^1.0.0",
    "yamljs": "^0.2.10"
  },
  "dependencies": {
    "jsesc": "^2.4.0",
    "process-promises": "^1.0.0"
  }
}
